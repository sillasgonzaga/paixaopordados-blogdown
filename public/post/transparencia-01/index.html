<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.59.1" />

  <title>Transparência (1): Qual estado brasileiro tem o maior número de servidores federais? &middot; Paixão por Dados</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/about/"><i class='fa fa-user fa-fw'></i>Sobre</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/contact/"><i class='fa fa-phone fa-fw'></i>Contato</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://facebook.com/sillast" target="_blank"><i class="fa fa-facebook-square fa-fw"></i>Facebook</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/sillasgonzaga" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/sillasgonzaga" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Transparência (1): Qual estado brasileiro tem o maior número de servidores federais?</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>15 Nov 2015</time>
  </div>

  

  
  
  
  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="/tags/transparencia">transparencia</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="/tags/servidores-publicos">servidores publicos</a>
    
  </div>
  
  

</div>

  

<h1 id="transparência-1-qual-estado-brasileiro-tem-o-maior-número-de-servidores-federais">Transparência (1): Qual estado brasileiro tem o maior número de servidores federais?</h1>

<h2 id="1-introdução">1 - Introdução</h2>

<p>Alguns dos datasets brasileiros mais interessantes podem ser encontrados no <strong><a href="http://transparencia.gov.br/">Portal da Transparência</a></strong>, no qual é possível obter dados sobre:</p>

<ul>
<li>gastos diretos do Governo Federal (desde 2004 - exceto Cartão de Pagamentos - desde 2002)</li>
<li>transferências de recursos a Estados e Municípios (desde 2004)</li>
<li>convênios com pessoas físicas, jurídicas ou entes governamentais (desde 1996)</li>
<li>previsão e arrecadação de receitas (desde 2009)</li>
<li><strong>servidores do Governo Federal.</strong></li>
</ul>

<p>É por esse último item que mais me interessei no momento e sobre o qual publicarei uma série de posts nos próximos dias.</p>

<p>Os dados foram baixados <a href="http://transparencia.gov.br/downloads/servidores.asp">deste endereço</a> e correspondem ao mês de Agosto, que era a opção mais recente disponível até então.</p>

<p>A pasta zipada baixada contém cinco arquivos, dentre os quais só usaremos dois: <em>20150831-Cadastro.csv</em>  e <em>20150831-Remuneracao.csv</em>. Ambos contem 44 variáveis e cerca de 700 mil linhas, mais a maioria delas não são muito importantes neste contexto.</p>

<h2 id="2-importação-e-limpeza-dos-dados">2. Importação e limpeza dos dados</h2>

<p>Após carregar as bibliotecas que serão usadas, hora de carregar os dados. Essa foi a primeira vez que eu trabalhei com um dataset tão grande no R. O arquivo pesa mais de 370 MB e demorou mais de um minuto para ser carregado. Imagina se fosse no Excel..</p>

<p>Ao notar que o carregamento dos dados demorava muito, usei uma solução que aprendi em fóruns sobre o R: importar apenas as colunas necessárias usando dplyr. Menos da metade das colunas presentes no arquivo csv original serão usadas na análise e o ato de filtrá-las fora agiliza em muito a importação para o R. Confira a comparação:</p>

<pre><code class="language-r"># Teste 1: Importar tudo
system.time(df &lt;- read.csv(&quot;C:/R/data/201508_Servidores/20150831_Cadastro.csv&quot;, sep=&quot;\t&quot;, stringsAsFactors = FALSE))
</code></pre>

<pre><code class="language-r">##    user  system elapsed 
##   42.68    0.70   43.93
</code></pre>

<pre><code class="language-r"># Teste 2: importar apenas colunas importantes
system.time(df &lt;- read.csv(&quot;C:/R/data/201508_Servidores/20150831_Cadastro.csv&quot;,
                           sep=&quot;\t&quot;, stringsAsFactors = FALSE) %&gt;%
              select(-DIPLOMA_INGRESSO_CARGOFUNCAO, -DATA_NOMEACAO_CARGOFUNCAO,
             -REFERENCIA_CARGO, -COD_AFASTAMENTO, -COD_GRUPO_AFASTAMENTO,
             -NIVEL_CARGO, -COD_UORG_EXERCICIO, -COD_UORG_LOTACAO, -OPCAO_PARCIAL,
             -DIPLOMA_INGRESSO_SERVICOPUBLICO, -DIPLOMA_INGRESSO_ORGAO,
             -DOCUMENTO_INGRESSO_SERVICOPUBLICO, -DATA_INICIO_AFASTAMENTO,
             -DATA_TERMINO_AFASTAMENTO, -TIPO_VINCULO, -COD_ORGSUP_EXERCICIO,
             -COD_ORG_EXERCICIO, -COD_ORGSUP_LOTACAO, -COD_ORG_LOTACAO,
             -CPF, -MATRICULA, -FUNCAO, -CLASSE_CARGO, -PADRAO_CARGO,
             -SIGLA_FUNCAO, -NIVEL_FUNCAO, -CODIGO_ATIVIDADE)
)
</code></pre>

<pre><code class="language-r">##    user  system elapsed 
##   37.34    0.56   38.31
</code></pre>

<p>Cada linha do df corresponde a um servidor e cada uma das variáveis corresponde a um atributo do mesmo.</p>

<p>Primeiro ponto a ser analisado: qual a qualidade dos dados? Quantas variáveis tem muitos valores vazios ou nulos?</p>

<pre><code class="language-r">##                   Id_SERVIDOR_PORTAL                                 NOME 
##                                    0                                    0 
##                        ORG_EXERCICIO                     ORGSUP_EXERCICIO 
##                                    4                                    4 
##                     SITUACAO_VINCULO                      REGIME_JURIDICO 
##                                    4                                    4 
##                  JORNADA_DE_TRABALHO DATA_DIPLOMA_INGRESSO_SERVICOPUBLICO 
##                                    4                                    4 
##                          ORG_LOTACAO                       ORGSUP_LOTACAO 
##                                   14                                   14 
##                  DATA_INGRESSO_ORGAO            DATA_INGRESSO_CARGOFUNCAO 
##                                 2799                                47192 
##                         UORG_LOTACAO                      DESCRICAO_CARGO 
##                               120819                               154017 
##                       UORG_EXERCICIO                         UF_EXERCICIO 
##                               165589                               189437 
##                            ATIVIDADE 
##                               688290
</code></pre>

<p>Visto que é possível que um mesmo servidor tenha mais de um cargo público (por exemplo, uma pessoa pode ser professora de universidade federal e chefe de seu departamento), é necessário excluir os servidores repetidos.</p>

<pre><code class="language-r">length(df$Id_SERVIDOR_PORTAL) #Quantidade de IDs de servidores no arquivo
</code></pre>

<pre><code class="language-r">## [1] 795107
</code></pre>

<pre><code class="language-r">length(unique(df$Id_SERVIDOR_PORTAL)) #Quantidade de IDs únicas
</code></pre>

<pre><code class="language-r">## [1] 681266
</code></pre>

<pre><code class="language-r">100 * length(unique(df$Id_SERVIDOR_PORTAL)) / 605670 # Porcentual de IDs únicas
</code></pre>

<pre><code class="language-r">## [1] 112.4814
</code></pre>

<pre><code class="language-r">df &lt;- df[!duplicated(df$Id_SERVIDOR_PORTAL), ]
</code></pre>

<p>Uma informação não presente no relatório é a região do Servidor. Isso é facilmente inserido manualmente pelo R (aliás, um bom exercício seria a criação de uma library com datasets brasileiros).</p>

<pre><code class="language-r">UF_EXERCICIO = sort(unique(na.omit(df$UF_EXERCICIO)))
br &lt;- data.frame(UF_EXERCICIO)
br$REGIAO &lt;- c('Norte', 'Nordeste', 'Norte', 'Norte', 'Nordeste', 'Nordeste', 'Centro-Oeste', 'Sudeste', 'Centro-Oeste', 'Nordeste', 'Sudeste', 'Centro-Oeste', 'Centro-Oeste', 'Norte', 'Nordeste', 'Nordeste', 'Nordeste', 'Sul', 'Sudeste', 'Nordeste', 'Norte', 'Norte', 'Sul', 'Sul', 'Nordeste', 'Sudeste', 'Nordeste')

df &lt;- merge(df, br, by=&quot;UF_EXERCICIO&quot;)
</code></pre>

<p><strong>Observação:</strong> notei um comportamento estranho do R. Ao fazer o merge(), ele automaticamente deleta todas as linhas onde o valor da variável UF_EXERCÍCIO é nulo. Como isso não implica um grande prejuízo para a análise, iremos proseguir mesmo assim.</p>

<p>Vamos agora à exploração básica de dados. Primeira pergunta: qual estado tem o maior número de servidores públicos?</p>

<pre><code class="language-r">temp &lt;- df %&gt;%
    select(UF_EXERCICIO, REGIAO) %&gt;%
    mutate(Estado = UF_EXERCICIO) %&gt;%
    group_by(Estado, REGIAO) %&gt;%
    summarise(numero.servidores = n())

    ggplot(data=temp, aes(x=reorder(Estado, numero.servidores), y=numero.servidores, fill=REGIAO)) +
        geom_bar(stat=&quot;identity&quot;) + coord_flip() +
        labs(title=&quot;Número de servidores por Estado&quot;, x=&quot;&quot;, y=&quot;Número de servidores&quot;) +
        theme_economist() +
        scale_fill_economist()
</code></pre>

<p><img src="/figs/transparencia01/unnamed-chunk-4-1.png" alt="aaa" /></p>

<pre><code class="language-r">#Gráfico por região
df %&gt;%
    select(REGIAO) %&gt;%
    group_by(REGIAO) %&gt;%
    summarise(numero.servidores = n()) %&gt;%
     ggplot(aes(x=reorder(REGIAO, numero.servidores) , y=numero.servidores)) +
        geom_bar(stat=&quot;identity&quot;) + coord_flip() +
        labs(title=&quot;Número de servidores por Estado&quot;, x=&quot;&quot;, y=&quot;Número de servidores&quot;) +
        theme_economist()
</code></pre>

<p><img src="/figs/transparencia01/unnamed-chunk-4-2.png" alt="center" /></p>

<p>É claro que a população de cada estado tem uma grande influência no resultado anterior&hellip; será?
Para tirar a dúvida, aqui vai um gráfico de proporção de servidores em cada estado. A tabela com a população de cada estado foi extraída manualmente da Wikipedia.</p>

<pre><code class="language-r">pop &lt;- read.csv2(&quot;C:/R/data/201508_Servidores/populacao.csv&quot;, stringsAsFactors = FALSE)
names(pop) &lt;- c(&quot;Estado&quot;, &quot;População&quot;)
temp &lt;- merge(temp, pop, by=&quot;Estado&quot;)
temp$Proporcao = round(1000*(temp$numero.servidores/temp$População),2)

    ggplot(data=temp, aes(x=reorder(Estado, temp$Proporcao), y=temp$Proporcao, fill=REGIAO)) +
        geom_bar(stat=&quot;identity&quot;) + coord_flip() +
        labs(title=&quot;Proporção de servidores por Estado&quot;, x=&quot;Estado&quot;, y=&quot;Proporção da população \n que é funcionário público&quot;) +
        theme_economist()
</code></pre>

<p><img src="/figs/transparencia01/unnamed-chunk-5-1.png" alt="center" /></p>

<p>Os resultados são muito interessantes. Mais de um quarto dos habitantes do Distrito Federal são funcionários públicos. Roraima, Amapá e Rio de Janeiro também parecem ter máquinas públicas inchadas.</p>

<p>Para finalizar, vou salvar o data frame criado para posteriores análises.</p>

<pre><code class="language-r">df %&gt;% as.data.frame() %&gt;% write.csv2(file = &quot;C:/R/data/201508_Servidores/transparencia.csv&quot;, row.names = FALSE)
</code></pre>

<p>O novo arquivo tem 191 MB, 48% a menos que o original.</p>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="/post/2015-11-07-dolar-indice-bovespa/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="/post/2015-11-07-dolar-indice-bovespa/">Correlação entre o dólar e ações de empresas do Índice Bovespa</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="/post/transparencia-2-qual-o-sal%C3%A1rio-m%C3%A9dio-dos-servidores-federais/">Transparência (2): Qual o salário médio dos servidores federais?</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="/post/transparencia-2-qual-o-sal%C3%A1rio-m%C3%A9dio-dos-servidores-federais/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'sillastg';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

</div>
</div>
<script src="/js/ui.js"></script>
<script src="//yihui.name/js/math-code.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-110050805-1', 'auto');
  ga('send', 'pageview');

</script>






</body>
</html>

